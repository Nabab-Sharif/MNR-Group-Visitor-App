<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<link rel="icon" type="image/svg+xml" href="/vite.svg" />
	<meta name="generator" content="MNR Sweaters Ltd" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>MNR Sweaters Ltd Visitor App</title>
	<link rel="manifest"
		href="data:application/json;base64,ew0KICAgICJzaG9ydF9uYW1lIjogIk1OUiBWaXNpdG9yIiwNCiAgICAibmFtZSI6ICJNTlIgR3JvdXAgVmlzaXRvciBBcHAiLA0KICAgICJpY29ucyI6IFt7DQogICAgICAgICAgICAic3JjIjogIi9pY29ucy9pY29uLTE5Mi5wbmciLA0KICAgICAgICAgICAgInNpemVzIjogIjE5MngxOTIiLA0KICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgICAic3JjIjogIi9pY29ucy9pY29uLTUxMi5wbmciLA0KICAgICAgICAgICAgInNpemVzIjogIjUxMng1MTIiLA0KICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIg0KICAgICAgICB9DQogICAgXSwNCiAgICAic3RhcnRfdXJsIjogIi4iLA0KICAgICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLA0KICAgICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMxODE4MWIiLA0KICAgICJ0aGVtZV9jb2xvciI6ICIjYTIxY2FmIiwNCiAgICAib3JpZW50YXRpb24iOiAiYW55Ig0KfQ==">
	<script type="module" crossorigin src="/assets/index-cb0d0f33.js"></script>
	<link rel="stylesheet" href="/assets/index-6ed6478b.css">

	<script type="module">
		window.onerror = (message, source, lineno, colno, errorObj) => {
			const errorDetails = errorObj ? JSON.stringify({
				name: errorObj.name,
				message: errorObj.message,
				stack: errorObj.stack,
				source,
				lineno,
				colno,
			}) : null;

			window.parent.postMessage({
				type: 'horizons-runtime-error',
				message,
				error: errorDetails
			}, '*');
		};
	</script>
	<script type="module">
		const observer = new MutationObserver((mutations) => {
			for (const mutation of mutations) {
				for (const addedNode of mutation.addedNodes) {
					if (
						addedNode.nodeType === Node.ELEMENT_NODE &&
						(
							addedNode.tagName?.toLowerCase() === 'vite-error-overlay' ||
							addedNode.classList?.contains('backdrop')
						)
					) {
						handleViteOverlay(addedNode);
					}
				}
			}
		});

		observer.observe(document.documentElement, {
			childList: true,
			subtree: true
		});

		function handleViteOverlay(node) {
			if (!node.shadowRoot) {
				return;
			}

			const backdrop = node.shadowRoot.querySelector('.backdrop');

			if (backdrop) {
				const overlayHtml = backdrop.outerHTML;
				const parser = new DOMParser();
				const doc = parser.parseFromString(overlayHtml, 'text/html');
				const messageBodyElement = doc.querySelector('.message-body');
				const fileElement = doc.querySelector('.file');
				const messageText = messageBodyElement ? messageBodyElement.textContent.trim() : '';
				const fileText = fileElement ? fileElement.textContent.trim() : '';
				const error = messageText + (fileText ? ' File:' + fileText : '');

				window.parent.postMessage({
					type: 'horizons-vite-error',
					error,
				}, '*');
			}
		}
	</script>
	<script type="module">
		const originalConsoleError = console.error;
		console.error = function (...args) {
			originalConsoleError.apply(console, args);

			let errorString = '';

			for (let i = 0; i < args.length; i++) {
				const arg = args[i];
				if (arg instanceof Error) {
					errorString = arg.stack || `${arg.name}: ${arg.message}`;
					break;
				}
			}

			if (!errorString) {
				errorString = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(' ');
			}

			window.parent.postMessage({
				type: 'horizons-console-error',
				error: errorString
			}, '*');
		};
	</script>
	<script type="module">
		const originalFetch = window.fetch;

		window.fetch = function (...args) {
			const url = args[0] instanceof Request ? args[0].url : args[0];

			// Skip WebSocket URLs
			if (url.startsWith('ws:') || url.startsWith('wss:')) {
				return originalFetch.apply(this, args);
			}

			return originalFetch.apply(this, args)
				.then(async response => {
					const contentType = response.headers.get('Content-Type') || '';

					// Exclude HTML document responses
					const isDocumentResponse =
						contentType.includes('text/html') ||
						contentType.includes('application/xhtml+xml');

					if (!response.ok && !isDocumentResponse) {
						const responseClone = response.clone();
						const errorFromRes = await responseClone.text();
						const requestUrl = response.url;
						console.error(`Fetch error from ${requestUrl}: ${errorFromRes}`);
					}

					return response;
				})
				.catch(error => {
					if (!url.match(/.html?$/i)) {
						console.error(error);
					}

					throw error;
				});
		};
	</script>
</head>

<body>
	<div id="root"></div>

</body>

</html>